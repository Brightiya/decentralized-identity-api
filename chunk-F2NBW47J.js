import{a as re,c as oe,h as ae,i as le,j as pe,k as de}from"./chunk-2MTQKYLR.js";import{b as X}from"./chunk-PJEN3DJN.js";import{f as H,i as R,r as U,t as ce}from"./chunk-UTHWGFUG.js";import{Ca as J,Da as K,Ea as Q,Fa as Z,Ga as ee,Ha as te,Ia as ne,Ja as ie,Ka as me,La as se,Ma as ge,Na as fe,Pa as _e,Qa as xe,Ra as ve,U as Y,Z as G,ba as q}from"./chunk-MIUOO2FT.js";import{$b as s,Fb as i,Gb as n,Hb as T,Ib as h,Jb as w,Lb as M,Ob as k,Qb as d,Rc as $,Sc as A,Tb as F,Vc as W,Yb as V,Zb as r,Zc as j,_ as S,_a as E,_b as u,bb as o,cc as z,dc as L,ec as B,gc as D,ka as C,lc as g,mc as f,ob as v,pa as y,pc as N,s as O,ub as m,wb as p,ya as _,yb as I,za as x}from"./chunk-GE42Z7CM.js";function be(t,l){if(t&1&&(i(0,"mat-option",8),r(1),g(2,"titlecase"),n()),t&2){let e=l.$implicit;p("value",e),o(),s(" ",f(2,2,e)," ")}}function Ce(t,l){if(t&1&&(h(0),i(1,"div",9),T(2,"mat-spinner",10),i(3,"div",11)(4,"h3"),r(5,"Loading profile data..."),n(),i(6,"p",12),r(7),g(8,"titlecase"),n()()(),w()),t&2){let e=d();o(7),s("Fetching information for ",f(8,1,e.selectedContext()),"")}}function he(t,l){if(t&1&&(i(0,"span",28),r(1),n()),t&2){let e=d().ngIf;o(),s(" (",e.code,") ")}}function we(t,l){if(t&1&&(i(0,"div",24)(1,"div",25),r(2,"Gender"),n(),i(3,"div",26),r(4),m(5,he,2,1,"span",27),n()()),t&2){let e=l.ngIf;o(4),s(" ",e.label," "),o(),p("ngIf",e.code)}}function Me(t,l){if(t&1&&(i(0,"div",24)(1,"div",25),r(2,"Pronouns"),n(),i(3,"div",26),r(4),n()()),t&2){let e=d().$implicit;o(4),u(e.attributes.pronouns)}}function ke(t,l){if(t&1&&(i(0,"div",29)(1,"div",25),r(2,"About me"),n(),i(3,"div",30),r(4),n()()),t&2){let e=d().$implicit;o(4),s(" ",e.attributes.bio," ")}}function Pe(t,l){if(t&1&&(i(0,"a",34)(1,"mat-icon",35),g(2,"titlecase"),r(3),n(),r(4),g(5,"titlecase"),n()),t&2){let e=l.$implicit,a=d(4);p("href",e.url,E),o(),F("matTooltip","",f(2,5,e.platform)," profile"),o(2),u(a.getIcon(e.platform)),o(),s(" ",f(5,7,e.platform)," ")}}function Oe(t,l){if(t&1&&(i(0,"div",31)(1,"div",25),r(2,"Online Presence"),n(),i(3,"div",32),m(4,Pe,6,9,"a",33),n()()),t&2){let e=d().$implicit,a=d(2);o(4),p("ngForOf",a.getLinks(e))}}function Se(t,l){t&1&&(i(0,"div",36)(1,"mat-icon",37),r(2,"info_outline"),n(),i(3,"h3"),r(4,"No personal information yet"),n(),i(5,"p",12),r(6," This context doesn't contain any personal details at the moment. "),n()())}function ye(t,l){if(t&1&&(i(0,"div",38)(1,"mat-icon"),r(2,"info_outline"),n(),i(3,"span"),r(4),n()()),t&2){let e=d().$implicit;o(4),u(e.note)}}function Ee(t,l){if(t&1){let e=M();h(0),i(1,"mat-card",14)(2,"mat-card-header")(3,"mat-icon",15),r(4,"person"),n(),i(5,"mat-card-title"),r(6,"Personal Information"),n(),i(7,"mat-card-subtitle"),r(8),g(9,"titlecase"),n()(),i(10,"mat-card-content")(11,"div",16),m(12,we,6,2,"div",17)(13,Me,5,1,"div",17)(14,ke,5,1,"div",18)(15,Oe,5,1,"div",19)(16,Se,7,0,"div",20),n()()(),m(17,ye,5,1,"div",21),i(18,"div",22)(19,"button",23),k("click",function(){_(e);let c=d(2);return x(c.loadProfile())}),i(20,"mat-icon"),r(21,"refresh"),n(),r(22," Refresh Data "),n()(),w()}if(t&2){let e=l.$implicit,a=d(2);o(8),s("Context: ",f(9,7,e.context),""),o(4),p("ngIf",e.attributes==null?null:e.attributes.gender),o(),p("ngIf",e.attributes==null?null:e.attributes.pronouns),o(),p("ngIf",e.attributes==null?null:e.attributes.bio),o(),p("ngIf",a.hasLinks(e)),o(),p("ngIf",!a.hasPersonalData(e)),o(),p("ngIf",e.note)}}function Ie(t,l){if(t&1){let e=M();h(0),i(1,"mat-card",39)(2,"mat-card-content",40)(3,"mat-icon",41),r(4,"error_outline"),n(),i(5,"h3"),r(6,"Failed to load profile"),n(),i(7,"p",12),r(8),n(),i(9,"button",42),k("click",function(){_(e);let c=d(2);return x(c.loadProfile())}),r(10," Try Again "),n()()(),w()}if(t&2){let e=d(2);o(8),u(e.error())}}function Te(t,l){if(t&1&&m(0,Ee,23,9,"ng-container",13)(1,Ie,11,1,"ng-container",13),t&2){let e=d();p("ngIf",e.profile()),o(),p("ngIf",e.error())}}var at=(()=>{class t{apiService=C(ce);wallet=C(J);themeService=C(Z);loading=v(!0);error=v(null);profile=v(null);darkMode=this.themeService.darkMode;selectedContext=v("profile");allowedContexts=["profile","identity","medical","professional","compliance"];ngOnInit(){this.loadProfile()}loadProfile(){this.loading.set(!0),this.error.set(null),this.wallet.address$.pipe(S(e=>e?this.apiService.getProfile(e,this.selectedContext()):(this.error.set("No wallet connected"),this.loading.set(!1),O(null)))).subscribe({next:e=>{e&&this.profile.set(e),this.loading.set(!1)},error:e=>{console.error("Profile fetch error:",e),this.error.set("Failed to load profile. Please try again later."),this.loading.set(!1)}})}hasPersonalData(e){let a=e.attributes||{};return!!(a.gender?.label||a.pronouns||a.bio||this.hasLinks(e))}hasLinks(e){return!!(e.online_links&&Object.keys(e.online_links).length>0)}getLinks(e){return e.online_links?Object.entries(e.online_links).map(([a,c])=>({platform:a,url:c})):[]}getIcon(e){let a={twitter:"twitter",x:"twitter",linkedin:"linkedin",github:"code",website:"language",instagram:"photo_camera",mastodon:"language",facebook:"facebook",youtube:"play_circle",discord:"group",telegram:"send",default:"link"},c=e.toLowerCase();return a[c]||a.default||"link"}static \u0275fac=function(a){return new(a||t)};static \u0275cmp=y({type:t,selectors:[["app-profile-overview"]],standalone:!0,features:[D],decls:16,vars:6,consts:[["content",""],[1,"overview-container"],[1,"page-header"],[1,"subtitle"],["appearance","outline",1,"context-selector","glass-select"],["panelClass","context-dropdown",3,"ngModelChange","selectionChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf","ngIfElse"],[3,"value"],[1,"loading-state"],["diameter","56"],[1,"state-message"],[1,"muted"],[4,"ngIf"],["appearance","outlined",1,"profile-card","glass-card"],["mat-card-avatar","",1,"avatar-icon"],[1,"profile-grid"],["class","profile-item",4,"ngIf"],["class","profile-item bio-item",4,"ngIf"],["class","profile-item links-item",4,"ngIf"],["class","empty-personal",4,"ngIf"],["class","backend-note glass-note",4,"ngIf"],[1,"refresh-area"],["mat-stroked-button","",3,"click"],[1,"profile-item"],[1,"label"],[1,"value"],["class","gender-code",4,"ngIf"],[1,"gender-code"],[1,"profile-item","bio-item"],[1,"value","bio-content"],[1,"profile-item","links-item"],[1,"value","links-grid"],["target","_blank","rel","noopener noreferrer","class","link-chip external-link",3,"href",4,"ngFor","ngForOf"],["target","_blank","rel","noopener noreferrer",1,"link-chip","external-link",3,"href"],[1,"link-icon",3,"matTooltip"],[1,"empty-personal"],[1,"empty-icon"],[1,"backend-note","glass-note"],[1,"error-card","glass-card"],[1,"error-content"],["color","warn"],["mat-raised-button","","color","primary",3,"click"]],template:function(a,c){if(a&1){let b=M();i(0,"div",1)(1,"div",2)(2,"h1"),r(3,"User Profile Overview"),n(),i(4,"p",3),r(5,"Your current personal information across contexts"),n()(),i(6,"mat-form-field",4)(7,"mat-label"),r(8,"Viewing Context"),n(),i(9,"mat-select",5),B("ngModelChange",function(P){return _(b),L(c.selectedContext,P)||(c.selectedContext=P),x(P)}),k("selectionChange",function(){return _(b),x(c.loadProfile())}),m(10,be,3,4,"mat-option",6),n(),i(11,"mat-hint"),r(12,"Switch to view different attribute sets"),n()(),m(13,Ce,9,3,"ng-container",7)(14,Te,2,2,"ng-template",null,0,N),n()}if(a&2){let b=V(15);I("dark",c.darkMode()),o(9),z("ngModel",c.selectedContext),o(),p("ngForOf",c.allowedContexts),o(3),p("ngIf",c.loading())("ngIfElse",b)}},dependencies:[j,$,A,W,U,H,R,ve,me,xe,ge,_e,fe,se,Q,K,q,G,ie,ne,te,ee,X,de,ae,re,oe,pe,Y,le],styles:["[_nghost-%COMP%]{display:block}.overview-container[_ngcontent-%COMP%]{padding:clamp(24px,4vw,48px) clamp(16px,5vw,64px);max-width:900px;margin:0 auto;transition:background .5s ease}.overview-container.dark[_ngcontent-%COMP%]{background:linear-gradient(to bottom,#0f0f1a,#0a0a14);color:#e2e8f0}.page-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:clamp(32px,6vw,56px)}.page-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(2.2rem,5.5vw,3.4rem);font-weight:800;background:linear-gradient(135deg,#6366f1,#a78bfa);-webkit-background-clip:text;-webkit-text-fill-color:transparent;margin:0 0 8px}.subtitle[_ngcontent-%COMP%]{font-size:1.1rem;color:#94a3b8;font-weight:400}.context-selector[_ngcontent-%COMP%]{width:100%;max-width:340px;margin:0 auto 40px;display:block}.glass-select[_ngcontent-%COMP%]{background:var(--card-bg, rgba(255, 255, 255, .75));-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);border-radius:16px;border:1px solid var(--card-border, rgba(226, 232, 240, .4))}  .context-dropdown{border-radius:16px!important}.profile-card[_ngcontent-%COMP%]{border-radius:24px;background:var(--card-bg, rgba(255, 255, 255, .78));-webkit-backdrop-filter:blur(16px) saturate(180%);backdrop-filter:blur(16px) saturate(180%);border:1px solid var(--card-border, rgba(226, 232, 240, .4));overflow:hidden;margin-bottom:32px}.overview-container.dark[_ngcontent-%COMP%]   .profile-card[_ngcontent-%COMP%]{background:#1e293b7a;border-color:#64748b4d}.avatar-icon[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1,#a78bfa);color:#fff;border-radius:12px}.profile-grid[_ngcontent-%COMP%]{display:grid;gap:24px;padding:8px 0}.profile-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:160px 1fr;gap:16px;align-items:start;padding:12px 0}.label[_ngcontent-%COMP%]{font-weight:600;color:var(--text-secondary);font-size:.95rem;text-transform:uppercase;letter-spacing:.4px}.value[_ngcontent-%COMP%]{line-height:1.6;color:var(--text-primary);font-size:1rem}.gender-code[_ngcontent-%COMP%]{font-size:.85rem;opacity:.65;margin-left:8px;color:#64748b}.bio-content[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-word;line-height:1.7}.links-grid[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px}.link-chip[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;padding:8px 16px;background:var(--chip-bg, rgba(99, 102, 241, .08));border-radius:999px;color:#6366f1;text-decoration:none;font-weight:500;transition:all .25s ease}.external-link[_ngcontent-%COMP%]{cursor:pointer;text-decoration:none}.external-link[_ngcontent-%COMP%]:hover, .external-link[_ngcontent-%COMP%]:focus{text-decoration:underline;background:#6366f11f}.overview-container.dark[_ngcontent-%COMP%]   .link-chip[_ngcontent-%COMP%]{background:#6366f12e;color:#a5b4fc}.link-chip[_ngcontent-%COMP%]:hover{background:var(--chip-hover, rgba(99, 102, 241, .18));transform:translateY(-1px)}.link-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px}.empty-personal[_ngcontent-%COMP%]{text-align:center;padding:64px 32px;color:#94a3b8}.empty-icon[_ngcontent-%COMP%]{font-size:56px;height:56px;width:56px;margin-bottom:16px;opacity:.7}.backend-note.glass-note[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px 20px;background:var(--notice-bg, rgba(99, 102, 241, .08));border-radius:16px;margin:24px 0;font-size:.95rem;color:#4f46e5}.overview-container.dark[_ngcontent-%COMP%]   .glass-note[_ngcontent-%COMP%]{background:#6366f126;color:#a5b4fc}.refresh-area[_ngcontent-%COMP%]{text-align:center;margin-top:32px}.error-card[_ngcontent-%COMP%]{border-radius:20px;text-align:center;padding:48px 32px}.error-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;height:48px;width:48px;margin-bottom:16px}@media (max-width: 720px){.profile-item[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}}@media (max-width: 480px){.context-selector[_ngcontent-%COMP%]{max-width:100%}}"]})}return t})();export{at as ProfileOverviewComponent};
